#JDBC项目重构

>项目改动：
>>与上次的JAVASE项目相比较，这次存放数据的地方有集合转为数据库，采用druid连接池对项目进行二次重构，实现控制台输入商品对应功能，Mysql对应表中数据发生正确相应的改变。
##一、项目启动
 1. 运行项目名[JDBCProject]下的sql文件夹里面的建表sql语句 
    ```sql
    CREATE TABLE `goods` (
     `id` int(11) NOT NULL AUTO_INCREMENT COMMENT '商品编号',
     `name` varchar(255) DEFAULT NULL COMMENT '商品名称',
     `price` double(10,2) DEFAULT NULL COMMENT '商品价格',
     `number` int(255) DEFAULT NULL COMMENT '商品数量',
     PRIMARY KEY (`id`)
    ) ENGINE=InnoDB AUTO_INCREMENT=12 DEFAULT CHARSET=utf8;
    ```  
 2. 在项目名下的src目录中运行项目启动类，包括【商品功能启动类】和 【统计商品信息启动类】  
    + **商品功能**
      + 添加商品 - 0 || 商品不存在直接添加，反之增加存在商品数量
      + 删除商品 - 1
      + 修改商品 - 2
      + 查询商品 - 3
      + 商品入库 - 4 || 商品编码不存在，提示商品不存在
      + 商品出库 - 5 || 商品编码不存在，提示商品不存在 
    + **统计商品功能**
      + 使用额外的线程，统计物品总数、物品总金额、物品平均价格
    +  
        ```java
        /**商品启动类*/
           ApplicationStart.java
        /**线程统计商品类*/
           ThreadCountGoods.java
          ``` 
 3. 输入正确的用户名和密码即可访问JDBCdemo小项目  
     ```sql
     username  = root
     passoword = root
     ```
##二、项目优化(未完全实现)
 + 抽取公共代码
   + 完成
 + 定义通用返回类
   + 返回值都是在内部消化，用不上
 + 思路： 定义通用返回类(类中用枚举描述返回信息)  -->  自定义异常()    -->   全局异常处理器(统一处理自定义异常，处理异常的时候返回设置返回信息的通用返回类)
    
##三、问题和解决方式
>商品模块问题简述
 >>User【用户模块】中配置文件db.properties 和 Goods【商品维护模块】中的配置文件重名，造成Goods模块中获取Connection时报空指针异常 
+ 分析问题与定位 
  + 所有的方法全部报空指针异常，都是面向数据库的只有Connection,获取连接前后打印连接池发现Json格式中的连接数量为0，打印配置数据库信息的配置文件发现打印的是**同名**的用户模块下的配置文件信息。
+ 解决问题
  + 更改文件名即可，文件名见名知意 
>统计商品模块问题简述：
>>统计商品信息时间隔1000ms统计的商品信息永远是上一次统计的数据的2倍，重复统计。 
+ 分析问题与定位  
  + 将数据库查询的数据进行多次的累次，定义的变量为全局变量
  + 怎么样确保新增数据被统计的同时，又不把旧数据多次统计导致统计数据错误？？？
    + 多次查询数据库是前提确保将新数据查询出来
    + 录入数据时，采用主键自增，确保表中的数据不重复
    + 采用set集合来存储查询数据库后返回的数据，并重写对应的Goods类的hashCode和equals
  + 解决问题
    + 全局变量设置为局部变量
    + 将查询数据库的类型由List --> Set
    


